<div class="board-frame">
    <div *ngIf="game && fields"
        class="board" [ngStyle]="{'--board-width': game.board.width, '--board-height': game.board.height}">
        <ng-container *ngFor="let field of fields; let index = index;">
            <div class="field"
                [ngClass]="{'forbidden-field': field.isCorner, 'can-move-to': field.canPieceBeMovedTo}"
                [ngStyle]="{'grid-row': field.row+1, 'grid-column': field.column+1}"
                (click)="field.moveTo()">
            </div>

            <div *ngIf="field.piece"
                class="piece {{field.piece}}"
                [ngClass]="{'selectable': field.canPieceBeMovedFrom, 'selected': field.isSelected}"
                [ngStyle]="{'grid-row': field.row + 1, 'grid-column': field.column + 1}"
                (click)="field.select()">
            </div>
        </ng-container>
    </div>
    <div *ngIf="gameResult"
        class="game-result"
        [ngClass]="{'winner':isWin, 'loser':!isWin}">
        <h3 class="display-4 game-result-title">
            {{isWin?'ZwyciÄ™stwo':'Przegrana'}}
        </h3>
    </div>
</div>

<div *ngIf="!(game&&fields)">
    Loading...
</div>